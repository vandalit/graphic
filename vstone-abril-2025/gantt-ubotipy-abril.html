<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Carta Gantt · UBO Project Tracker</title>
  <!-- FontAwesome -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"/>
  <style>
    :root{--bg:#111;--card:#1b1b1b;--accent-dev:#7cffac;--accent-ux:#d86cff;--text:#eee;--cols:16;--cell-w:120px;--row-h:42px}
    *{box-sizing:border-box;font-family:Inter,Arial,sans-serif}
    body{margin:0;background:var(--bg);color:var(--text)}
    h1{margin:1rem;font-size:1.6rem;color:var(--accent-dev)}
    #gantt-wrapper{overflow-x:auto;padding:1rem}
    .weeks{display:inline-flex;margin-left:200px;min-width:calc(var(--cols)*var(--cell-w));border-left:2px solid #000}
    .week{flex:0 0 var(--cell-w);height:var(--row-h);display:flex;align-items:center;justify-content:center;background:#222;font-weight:600;border-right:2px solid #000;position:sticky;top:0;z-index:3}
    .row{display:flex;align-items:center;margin-bottom:2px}
    .label{width:200px;min-width:200px;height:var(--row-h);display:flex;align-items:center;padding-left:.5rem;font-weight:600;background:var(--card);position:sticky;left:0;z-index:2}
    .timeline{position:relative;height:var(--row-h);width:calc(var(--cols)*var(--cell-w));background:repeating-linear-gradient(90deg,#2a2a2a 0 calc(var(--cell-w)-2px),#111 calc(var(--cell-w)-2px) var(--cell-w))}
    .bar{position:absolute;top:2px;height:calc(var(--row-h)-4px);border-radius:6px;display:flex;align-items:center;justify-content:center;font-size:.7rem;font-weight:600;padding:0 6px;color:#000;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;cursor:pointer;opacity:.95}
    .bar[data-role="DEV"]{background:var(--accent-dev)}
    .bar[data-role="UX"]{background:var(--accent-ux)}
    .bar:hover::after{content:"Haz clic para ver detalles";position:absolute;top:-28px;left:50%;transform:translateX(-50%);background:#000;padding:.2rem .5rem;border-radius:4px;font-size:.65rem;color:#fff;white-space:nowrap;z-index:10}
    .bar{padding: 8px;}
    /* Modal */
    .modal-overlay{position:fixed;inset:0;background:rgba(0,0,0,.7);display:none;align-items:center;justify-content:center;z-index:50}
    .modal{background:var(--card);width:90%;max-width:520px;border-radius:10px;padding:1.5rem;position:relative;animation:fadeIn .25s ease}
    .modal h2{margin-top:0;color:var(--accent-dev)}
    .close-btn{position:absolute;top:10px;right:12px;font-size:1.3rem;color:var(--text);cursor:pointer}
    .placeholder{width:100%;height:110px;border-radius:8px;background:#444 url("./assets/img/banner-klein.png") center/cover;margin:.4rem 0 1rem}
    .detail-list{margin:.6rem 0 0;padding:0;list-style:none}
    .detail-list li{margin:.45rem 0;display:flex;gap:.5rem;align-items:flex-start;line-height:1.3}
    .detail-list i{min-width:18px;font-size:.8rem;color:var(--accent-dev);margin-top:2px}
    @keyframes fadeIn{from{opacity:0;transform:scale(.95)}to{opacity:1;transform:scale(1)}}
    /* Acordeones */
    details{margin:1rem;background:var(--card);border:1px solid #333;border-radius:6px}
    summary{padding:.75rem 1rem;font-weight:600;background:#222;color:var(--accent-dev);cursor:pointer;border-radius:6px 6px 0 0}
    .content{padding:.5rem 1rem 1rem}
  </style>
</head>
<body>
  <h1>Carta Gantt – MVP “UBO Project Tracker”</h1>
  <div id="gantt-wrapper">
    <div class="weeks" id="weeks"></div>
    <div id="rows"></div>
  </div>

  <!-- Modal -->
  <div class="modal-overlay" id="modal">
    <div class="modal" role="dialog" aria-modal="true">
      <i class="fa-solid fa-xmark close-btn" id="closeModal"></i>
      <h2 id="modalTitle"></h2>
      <img class="placeholder" id="modalImg" alt="placeholder"/>
      <ul class="detail-list" id="modalBody"></ul>
    </div>
  </div>

  <!-- Acordeones -->
  <details open><summary>Mes 1: Setup & Research</summary><div class="content"><p><strong>DEV:</strong> Setup del repo, arquitectura modular, API inicial.</p><p><strong>UX:</strong> Entrevistas, definición de personas y CJM, wireframes baja fidelidad.</p></div></details>
  <details><summary>Mes 2: CRUD & Prototipo visual</summary><div class="content"><p><strong>DEV:</strong> CRUD completo usuarios/proyectos, auth, dashboard base.</p><p><strong>UX:</strong> UI‑Kit, prototipo Hi‑Fi, iteración con PO.</p></div></details>
  <details><summary>Mes 3: Dashboard final y pruebas</summary><div class="content"><p><strong>DEV:</strong> Dashboards funcionales, API, blog.</p><p><strong>UX:</strong> Tests de usabilidad, accesibilidad, entrega final.</p></div></details>
  <details><summary>Mes 4: Go‑live & Validación</summary><div class="content"><p><strong>DEV:</strong> Integración visual, performance, Power BI y despliegue.</p><p><strong>UX:</strong> Entrevistas post‑release, informe KPI, retroalimentación.</p></div></details>

<script>
const COLS=16,CELL_W=120;
// Generar cabecera semanas
weeks.innerHTML=Array.from({length:COLS},(_,i)=>`<div class="week">S${i+1}</div>`).join('');

// Datos
const roles=[{key:'DEV',name:'DEV'},{key:'UX',name:'UX / QA'}];
const tasks={
  DEV:[
    {start:1,end:4,title:'Setup & Arquitectura',detail:{hours:55,items:['Inicializar repositorio Git & CI/CD','Configurar servidor local (Nginx + PHP)','Estructurar arquitectura Laravel + Angular','Documentar estándares de código']}},
    {start:5,end:8,title:'Auth & CRUD Usuarios/Proyectos',detail:{hours:60,items:['Laravel Sanctum & políticas','Migraciones y seeders','Formularios Angular reactivos','Pruebas de integración']}},
    {start:9,end:12,title:'Dashboards + API + Blog',detail:{hours:70,items:['Diseñar endpoints REST','Integrar Chart.js','Módulo Blog con CKEditor','Benchmark de rendimiento']}},
    {start:13,end:16,title:'Fixes + Deploy + Power BI',detail:{hours:55,items:['Integración final UI','Scripts de despliegue AlmaLinux','POC Power BI','Hardening de seguridad']}}
  ],
  UX:[
    {start:1,end:4,title:'Research Interviews & CJM',detail:{hours:50,items:['5 entrevistas contexto','Personas & Journey Map','Benchmark dashboards','Wireframes low‑fi']}},
    {start:5,end:8,title:'UI‑Kit & Hi‑Fi Prototipo',detail:{hours:55,items:['Tokens de diseño','Biblioteca de componentes','Prototipo interactivo','Iteraciones con feedback']}},
    {start:9,end:12,title:'Usability Test & Accesibilidad',detail:{hours:60,items:['Test con 8 usuarios','Reporte de hallazgos','Ajustes de contraste y ARIA','Guía de accesibilidad']}},
    {start:13,end:16,title:'Post‑release Interviews & KPI',detail:{hours:45,items:['Entrevistas post‑lanzamiento','Medición de KPIs','Informe de mejoras','Priorizar backlog fase 2']}}
  ]
};

const rows=document.getElementById('rows');
roles.forEach(r=>{
  const row=document.createElement('div');row.className='row';
  row.innerHTML=`<div class="label">${r.name}</div><div class="timeline"></div>`;
  const timeline=row.querySelector('.timeline');
  tasks[r.key].forEach(t=>{
    const bar=document.createElement('div');bar.className='bar';bar.dataset.role=r.key;bar.textContent=t.title;
    const left=(t.start-1)*CELL_W;bar.style.left=`${left}px`;bar.style.width=`${(t.end-t.start+1)*CELL_W-4}px`;
    bar.addEventListener('click',()=>openModal(t,r.key));
    timeline.appendChild(bar);
  });
  rows.appendChild(row);
});

// Modal logic
const modal=document.getElementById('modal');
const modalTitle=document.getElementById('modalTitle');
const modalBody=document.getElementById('modalBody');
const modalImg=document.getElementById('modalImg');
const closeBtn=document.getElementById('closeModal');

function openModal(task,role){
  modalTitle.textContent=task.title;
  // Color placeholder según rol
  const color=role==='DEV'? '7cffac' : 'd86cff';
  modalImg.src=`./assets/img/banner-klein.png`;
  // Listado de detalles
  modalBody.innerHTML=`<li><i class='fa-regular fa-clock'></i><strong> Horas estimadas:</strong> ${task.detail.hours} h</li>`+
    task.detail.items.map(it=>`<li><i class='fa-solid fa-circle-dot'></i>${it}</li>`).join('');
  modal.style.display='flex';
}
function closeModal(){modal.style.display='none';}
closeBtn.addEventListener('click',closeModal);
modal.addEventListener('click',e=>{if(e.target===modal)closeModal();});
document.addEventListener('keydown',e=>{if(e.key==='Escape')closeModal();});
</script>
</body>
</html>
